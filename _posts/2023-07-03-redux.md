---
layout: post
title: Redux-Toolkitì— ëŒ€í•´ ì•Œì•„ë³´ì
subtitle: reduxë¥¼ ë³´ë‹¤ í¸ë¦¬í•˜ê²Œ
categories: react
tags: [react, hook]
image: /assets/images/2023-07-03-redux/redux.png
---

#### ë“¤ì–´ê°€ë©°ğŸ˜ƒ

---

êµìœ¡ í”„ë¡œê·¸ë¨ì—ì„œ ê°€ì¥ ê¸°ëŒ€ë˜ì—ˆë˜ ë¦¬ë•ìŠ¤ ìˆ˜ì—…ì´ ì‹œì‘ë˜ì—ˆë‹¤. ê·¸ëŸ°ë° ì™ ê±¸? ë„ˆë¬´ ë¹ ë¥´ì–ì•„? ğŸ¤¢ ìŠ¨ìƒë‹˜ ì›ë˜ ì•ˆê·¸ëŸ¬ì…¨ì–ì•„ìš”ã…  ì˜¤ëŠ˜ë”°ë¼ ì§„ë„ê°€ ì™œì´ë ‡ê²Œ ë¹¨ë¦¬ ë‚˜ê°€ëŠ” ëŠë‚Œì¸ì§€ã…  í”„ë¡œì íŠ¸ê°€ ë‹¤ê°€ì˜¤ë©´ì„œ ê°•ì‚¬ë‹˜ ë§ˆìŒë„ ê¸‰í•´ì§€ì…¨ë‚˜ë¶€ë‹¤,,,ì—¬íŠ¼ ìˆ˜ì—…ì„ ë°”íƒ•ìœ¼ë¡œ ë°˜ë³µì ìœ¼ë¡œ ì˜ˆì œë¥¼ ëŒë ¤ë³´ë‹ˆ ì´í•´ê°€ ìŠ¬ ê°€ê¸° ì‹œì‘í–ˆë‹¤.
ìˆ˜ì—…ì—ì„œëŠ” `Redux-Toolkit`ì— ëŒ€í•œ ê°œë…ì„ ì•Œì•„ë³´ì•˜ê³  ê·¸ ê°œë…ë“¤ì„ ì˜¤ëŠ˜ í¬ìŠ¤íŒ…ì— ì •ë¦¬í•´ë³´ë ¤ í•œë‹¤.

<br /><br />

### Redux-Toolkit ì´ë€?

---

ìš°ì„  <span style="color: #ff5100;;">Redux-Toolkit(RTK)ì´ë€, Reduxë¥¼ ë” ì‰½ê²Œ, ê°„ë‹¨í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬</span>ì´ë‹¤. Reduxì˜ ë³µì¡í•œ ì„¤ì •ê³¼ ë³´ì¼ëŸ¬ ì½”ë“œë¥¼ ê°„ì†Œí™” ì‹œí‚¤ëŠ” ë“±ì˜ ë§ì€ ì´ì ì„ ê°€ì§€ê³  ìˆì–´ ê³µì‹ë¬¸ì„œì—ì„œë„ Redux-Toolkit ì‚¬ìš©ê³¼ ì „í™˜ì„ ê¶Œì¥í•˜ê³  ìˆë‹¤. ì˜¤ëŠ˜ì€ Redux-Toolkitì—ì„œ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ ì¤‘ `createSlice()`ë¥¼ ì¤‘ì ìœ¼ë¡œ ë¦¬í„±ìŠ¤ íˆ´í‚· ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ì. ì•„ë˜ì˜ ì˜ˆì œëŠ” ì´ì „ í¬ìŠ¤íŒ…ì—ì„œ ê³„ì† í•´ì™”ë˜ counter ë¥¼ ì£¼ì œë¡œ ë‹¤ë£¨ë©°, ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ í™˜ê²½ì„ ì„¸íŒ…í•´ì£¼ì—ˆë‹¤.

```
npm install react-redux
npm install @reduxjs/toolkit
npm install --save redux-logger
```

<br /><br />

### createSlice()

---

src í´ë” ë‚´ë¶€ì— store í˜¹ì€ redux íŒŒì¼ì„ ìƒì„±í•´ì£¼ê³  ê·¸ ì•ˆì— `counterStore.js` íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì—ˆë‹¤.  
<span style="color: #ff5100;;">createSlice() í•¨ìˆ˜ë¥¼ í†µí•´ ì´ˆê¸° ìƒíƒœ, ë¦¬ë“€ì„œì™€ ì•¡ì…˜ì„ í•œë²ˆì— ì •ì˜í•  ìˆ˜ ìˆë‹¤.</span> ì´ì „ì— ì•¡ì…˜ì„ ë”°ë¡œ ì •ì˜í•´ì£¼ê³ , ê·¸ì— í•´ë‹¹í•˜ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê³ , ì´ˆê¸°ê°’ì„ ì–´ë–»ê²Œ ì €ë–»ê²Œ ë³€ê²½í•˜ê³ .. í•˜ëŠ” ë¶€ë¶„ì—ì„œ ì•„ì£¼ ê°„í¸í•´ì§„ ëª¨ìŠµì´ë‹¤.

```jsx
import { createSlice } from "@reduxjs/toolkit";
const initialState = { value: 0 };

export const countSlice = createSlice({
  name: "counter",
  initialState,
  reducers: {
    increment(state) {
      //   return { value: state.value + 1 };
      state.value += 1;
    },
    decrement(state) {
      //   return { value: state.value - 1 };
      state.value -= 1;
    },
    reset() {
      //   return { value: initialState.value };
      state.value = initialState.value;
    },
  },
});

export const { increment, decrement, reset } = countSlice.actions;
export default countSlice.reducer;
```

ì½”ë“œë¥¼ ëœ¯ì–´ë³´ì.

1. **name** : ìŠ¬ë¼ì´ìŠ¤ ì´ë¦„ì´ë©° ë‹¤ë¥¸ ì•¡ì…˜ë“¤ê³¼ ì´ë¦„ ì¤‘ë³µì„ í”¼í•˜ê¸° ìœ„í•´ ê³ ìœ ì˜ ê°’ì„ ê°€ì ¸ì•¼í•œë‹¤.
2. **initialState** : ë¯¸ë¦¬ ìƒì„±í•œ ì´ˆê¸°ê°’ì„ í• ë‹¹í•œë‹¤.
3. **reducers** : ê°ê°ì˜ actionê³¼ stateì˜ ë³€í™”ë¥¼ ì •ì˜í•œë‹¤. ê° ì´ë¦„ì€ dispatchë¡œ ë¶€ë¥´ëŠ” ì•¡ì…˜í•¨ìˆ˜ì˜ ì´ë¦„ì´ë‹¤. dispatchë¥¼ í†µí•´ ì „ë‹¬í•œ ê°’ì€ **action.payload**ë¥¼ í†µí•´ ë°›ì„ ìˆ˜ ìˆë‹¤.  
   ++ stateì˜ ë³€í™”ì—ì„œ í¸ë¦¬í•œê²Œ ì£¼ì„ì²˜ëŸ¼ returní•˜ì§€ ì•Šê³ ë„ ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ë©° ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë‹¤.
4. action ë“¤ê³¼ reducerë¥¼ export í•´ì¤€ë‹¤.

<br /><br />

### store

---

counter.js íŒŒì¼ì´ ìˆëŠ” store í´ë”ì— `store.js` íŒŒì¼ì„ ìƒì„±í•´ì£¼ì—ˆë‹¤.
`configureStore()` ë©”ì†Œë“œë¥¼ í†µí•´ storeë¥¼ ìƒì„±í•œë‹¤. ê·¸ë¦¬ê³  <span style="color: #ff5100;;">ìœ„ì—ì„œ ë‚´ë³´ë‚¸ reducer ë¥¼ storeì— ë“±ë¡</span>ì‹œì¼œì¤€ë‹¤. ì•„ë˜ì˜ ì˜ˆì œì—ì„œëŠ” counter ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë“±ë¡í•´ì£¼ì—ˆëŠ”ë° ì´ëŠ” ë‹¤ìŒ counter.js íŒŒì¼ì—ì„œ state.counter.value ë¡œ ê°’ì„ ë¶ˆëŸ¬ì˜¬ ë•Œ ì‚¬ìš©ëœë‹¤.

```jsx
import { configureStore } from "@reduxjs/toolkit";
import countReducer from "./countStore";

const store = configureStore({
  reducer: {
    counter: countReducer,
    // ì•„ë˜ ë‹¤ë¥¸ ë¦¬ë“€ì„œ
  },
});

export default store;
```

<br /><br />

### Provider

---

ìœ„ì—ì„œ ì‘ì„±í•œ storeë¥¼ ì „ì—­ìœ¼ë¡œ ë‚´ë ¤ì£¼ê¸° ìœ„í•´ Appì„ Providerë¡œ ê°ì‹¸ì¤€ë‹¤. ì´ì œ ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ì—ì„œë„ countSlice ë¥¼ ì“¸ ìˆ˜ ìˆë‹¤!ğŸ˜€

```jsx
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App";
import { Provider } from "react-redux";
import store from "./redux/store";

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(
  <React.StrictMode>
    <Provider store={store}>
      <App />
    </Provider>
  </React.StrictMode>
);
```

<br /><br />

### useSelector, useDispatch

---

ì´ì œ counter.js ë¼ëŠ” í˜ì´ì§€ íŒŒì¼ì—ì„œ ìƒíƒœê°’ì„ ë¶ˆëŸ¬ì˜¤ê³  ì•¡ì…˜ì— ë”°ë¥¸ í•¨ìˆ˜ë¥¼ í• ë‹¹ì‹œì¼œë³´ì.
ìš°ì„  store ì— ì €ì¥ëœ ê°’ì„ ë¶ˆëŸ¬ì˜¤ë ¤ë©´ `useSelector()`ë¥¼ í†µí•´ ì•„ë˜ì™€ ê°™ì´ ë¶ˆëŸ¬ì™€ì•¼í•œë‹¤.

```jsx
const count = useSelector((state) => state.counter.value);
// counter : ìœ„ì—ì„œ storeì— ì €ì¥ëœ reducerì˜ ì´ë¦„
```

<br />

ê·¸ë¦¬ê³  `useDispatch()`ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒíƒœë¥¼ ë³€ê²½í•  ê°’ì„ ì „ë‹¬í•´ì¤€ë‹¤.

```jsx
const dispatch = useDispatch();
<button onClick={() => dispatch(increment())}>+</button>;
```

<br />

counter.js ì „ì²´ì½”ë“œ

```jsx
import { useDispatch, useSelector } from "react-redux";
import { decrement, increment, reset } from "../redux/countStore";

export default function ReduxCount() {
  const count = useSelector((state) => state.counter.value);
  const dispatch = useDispatch();

  return (
    <div>
      <div>ì¹´ìš´í„° : {count}</div>
      <div>
        <button onClick={() => dispatch(increment())}>+</button>
        <button onClick={() => dispatch(decrement())}>-</button>
        <button onClick={() => dispatch(reset())}>reset</button>
      </div>
    </div>
  );
}
```

<br /><br />
ì´ë ‡ê²Œ í•´ì£¼ë©´ redux-toolkitìœ¼ë¡œ ê°„ë‹¨í•œ ì¹´ìš´í„° ì•± ë§Œë“¤ê¸°ëŠ” ëì´ë‹¤! ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

<img width="200" alt="ì¹´ìš´í„° ì•±" src="https://github.com/ju-ju2/precamp_class/assets/71650663/45c2a7de-eb2c-4136-b100-0e630009e966">

<br /><br /><br /><br />

---

í—ˆí—ˆí—ˆ. ìœ„ì˜ ë¡œì§ì€ reduxë¥¼ ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ìˆë‹¤ë©´ ì•„ì£¼ ì‰½ê²Œ ì´í•´í•˜ê² ì§€ë§Œ ì‚¬ì‹¤ ë‚˜ëŠ” reduxë¥¼ ì‚¬ìš©í•´ë³¸ì ì´ ì—†ì–´ì„œ í•œë²ˆì— ì´í•´í•˜ê¸° ì–´ë ¤ì› ë‹¤. ì§ì ‘ ì†ìœ¼ë¡œ ì³ë³´ê³ , ì˜ˆì œë¥¼ ë‘ì–´ê°œ í’€ì–´ë³´ê³  ë‚˜ì„œì•¼ ì•„í•˜? ì‹¶ì—ˆë‹¤. ì´í•´ê°€ ë˜ë‹ˆ ê½¤ ì¬ë¯¸ì¡Œë‹¤. ìƒê°ë³´ë‹¤ ì¬ë°Œê³  ë‹¤ì–‘í•œ ë¦¬ì•¡íŠ¸ì˜ ìƒíƒœê´€ë¦¬ ì„¸ê³„..ë¹ ì ¸ë“ ë‹¤ ë¹ ì ¸ë“¤ì–´ ğŸ˜µâ€ğŸ’«ğŸ˜µâ€ğŸ’«ğŸ˜µâ€ğŸ’«
